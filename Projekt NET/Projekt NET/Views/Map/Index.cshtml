@{
    ViewData["Title"] = "Map";
}

<h2>Interactive Drone Map</h2>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
    #map {
        height: 600px;
        width: 100%;
    }
</style>

<div id="map"></div>

<script src="~/js/map-config.js"></script>

<script>
    const map = L.map('map', {
        maxBounds: [
            [49.0, 14.0],   
            [55.0, 24.2]    
        ],
        maxBoundsViscosity: 1.0
    }).setView([52.237, 21.017], 6);
    map.setMinZoom(7);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    fetch('/Map/GetDroneData')
        .then(res => res.json())
        .then(data => {
            data.markers.forEach(marker => {
                L.marker([marker.lat, marker.lng], {
                    icon: droneIcon
                }).addTo(map)
                    .bindPopup(marker.popup);
            });
        });
</script>

